(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{TFVh:function(e,t,i){"use strict";i.r(t),i.d(t,"DemoModule",(function(){return x}));var n=i("ofXK"),c=i("tk/3"),a=i("tyNb"),s=i("Nrjh"),d=i("/om3"),v=i("dBcC"),o=i("lJxs"),w=i("cbJd"),l=i("9ig3"),r=i("aetl"),h=i("M34a"),f=i("jKzE"),m=i("L8hi"),p=i("piIK"),y=i("sWYD"),u=i("WIjQ"),D=i("G6Tw"),g=i("G6HM"),C=i("fXoL"),k=i("Vpa8"),b=i("kx+m"),I=i("1xDM"),O=i("e096");function J(e,t){1&e&&(C.id(0,"\n  "),C.mc(1,"div",3),C.id(2,"\n    "),C.ic(3,"i",4),C.id(4," "),C.ic(5,"br"),C.id(6,"\n    Loading events...\n  "),C.lc(),C.id(7,"\n"))}function M(e,t){if(1&e){const e=C.nc();C.mc(0,"mwl-calendar-month-view",8),C.yc("dayClicked",(function(t){return C.Zc(e),C.Ac(2).dayClicked(t.day)}))("eventClicked",(function(t){return C.Zc(e),C.Ac(2).eventClicked(t.event)})),C.id(1,"\n    "),C.lc()}if(2&e){const e=C.Ac().$implicit,t=C.Ac();C.Jc("viewDate",t.viewDate)("events",e)("activeDayIsOpen",t.activeDayIsOpen)}}function A(e,t){if(1&e){const e=C.nc();C.mc(0,"mwl-calendar-week-view",9),C.yc("eventClicked",(function(t){return C.Zc(e),C.Ac(2).eventClicked(t.event)})),C.id(1,"\n    "),C.lc()}if(2&e){const e=C.Ac().$implicit,t=C.Ac();C.Jc("viewDate",t.viewDate)("events",e)}}function j(e,t){if(1&e){const e=C.nc();C.mc(0,"mwl-calendar-day-view",9),C.yc("eventClicked",(function(t){return C.Zc(e),C.Ac(2).eventClicked(t.event)})),C.id(1,"\n    "),C.lc()}if(2&e){const e=C.Ac().$implicit,t=C.Ac();C.Jc("viewDate",t.viewDate)("events",e)}}function S(e,t){if(1&e&&(C.mc(0,"div"),C.id(1,"\n  "),C.mc(2,"div",5),C.id(3,"\n    "),C.gd(4,M,2,3,"mwl-calendar-month-view",6),C.id(5,"\n    "),C.gd(6,A,2,2,"mwl-calendar-week-view",7),C.id(7,"\n    "),C.gd(8,j,2,2,"mwl-calendar-day-view",7),C.id(9,"\n  "),C.lc(),C.id(10,"\n"),C.lc()),2&e){const e=C.Ac();C.Ub(2),C.Jc("ngSwitch",e.view),C.Ub(2),C.Jc("ngSwitchCase","month"),C.Ub(2),C.Jc("ngSwitchCase","week"),C.Ub(2),C.Jc("ngSwitchCase","day")}}function E(e){const t=e.getTimezoneOffset();return`T00:00:00${t>0?"-":"+"}${String(Math.floor(Math.abs(t/60))).padStart(2,"0")}:${String(Math.abs(t%60)).padEnd(2,"0")}`}class ${constructor(e){this.http=e,this.view=w.a.Month,this.viewDate=new Date,this.activeDayIsOpen=!1}ngOnInit(){this.fetchEvents()}fetchEvents(){const e={month:l.a,week:r.a,day:h.a}[this.view],t={month:f.a,week:m.a,day:p.a}[this.view],i=(new c.c).set("primary_release_date.gte",Object(y.a)(e(this.viewDate),"yyyy-MM-dd")).set("primary_release_date.lte",Object(y.a)(t(this.viewDate),"yyyy-MM-dd")).set("api_key","0ec33936a68018857d727958dca1424f");this.events$=this.http.get("https://api.themoviedb.org/3/discover/movie",{params:i}).pipe(Object(o.a)(({results:e})=>e.map(e=>({title:e.title,start:new Date(e.release_date+E(this.viewDate)),color:g.a.yellow,allDay:!0,meta:{film:e}}))))}dayClicked({date:e,events:t}){Object(u.a)(e,this.viewDate)&&(Object(D.a)(this.viewDate,e)&&!0===this.activeDayIsOpen||0===t.length?this.activeDayIsOpen=!1:(this.activeDayIsOpen=!0,this.viewDate=e))}eventClicked(e){window.open(`https://www.themoviedb.org/movie/${e.meta.film.id}`,"_blank")}}$.\u0275fac=function(e){return new(e||$)(C.hc(c.a))},$.\u0275cmp=C.bc({type:$,selectors:[["mwl-demo-component"]],decls:9,vars:6,consts:[[3,"view","viewDate","viewChange","viewDateChange"],["loading",""],[4,"ngIf","ngIfElse"],[1,"text-center"],[1,"fas","fa-spin","fa-spinner","fa-5x"],[3,"ngSwitch"],[3,"viewDate","events","activeDayIsOpen","dayClicked","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","activeDayIsOpen","dayClicked","eventClicked"],[3,"viewDate","events","eventClicked"]],template:function(e,t){if(1&e&&(C.mc(0,"mwl-demo-utils-calendar-header",0),C.yc("viewChange",(function(e){return t.view=e}))("viewDateChange",(function(e){return t.viewDate=e}))("viewDateChange",(function(){return t.fetchEvents()}))("viewChange",(function(){return t.fetchEvents()})),C.id(1,"\n"),C.lc(),C.id(2,"\n\n"),C.gd(3,J,8,0,"ng-template",null,1,C.hd),C.id(5,"\n\n"),C.gd(6,S,11,4,"div",2),C.Bc(7,"async"),C.id(8,"\n")),2&e){const e=C.Wc(4);C.Jc("view",t.view)("viewDate",t.viewDate),C.Ub(6),C.Jc("ngIf",C.Cc(7,4,t.events$))("ngIfElse",e)}},directives:[k.a,n.o,n.q,n.r,b.a,I.a,O.a],pipes:[n.b],encapsulation:2,changeDetection:0});var _=i("j1vE");class x{}x.\u0275mod=C.fc({type:x}),x.\u0275inj=C.ec({factory:function(e){return new(e||x)},imports:[[n.c,c.b,s.a.forRoot({provide:d.a,useFactory:_.a}),v.a,a.e.forChild([{path:"",component:$}])]]})}}]);